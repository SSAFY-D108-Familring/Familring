<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.familring.familyservice.model.dao.FamilyDao">

    <!-- 가족 정보 ResultMap -->
    <resultMap id="familyInfo" type="com.familring.familyservice.model.dto.FamilyDto">
        <result column="family_id" property="familyId"/>
        <result column="family_code" property="familyCode"/>
        <result column="family_count" property="familyCount"/>
        <result column="family_communication_status" property="familyCommunicationStatus"/>
        <result column="family_created_at" property="familyCreatedAt"/>
    </resultMap>

    <select id="findFamilyInfoByUserId" resultMap="familyInfo">
        SELECT *
        FROM family f
        JOIN family_user fu
            ON f.family_id = fu.family_id
        WHERE fu.user_id = #{userId}
    </select>

    <select id="findFamilyByFamilyId" resultMap="familyInfo">
        SELECT *
        FROM family
        WHERE family_id = #{familyId}
    </select>
</mapper>